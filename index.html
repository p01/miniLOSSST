<body id=b>
<script>
maps = [


[
0,0,0,0,0,0,
0,0,0,0,0,0,
0,0,0,0,0,0,
0,0,0,1,0,0,
0,0,1,1,0,0,
0,0,1,1,1,0,
0,0,1,1,0,0,
0,0,0,0,0,0,
],

[
0,0,0,0,0,0,
0,0,0,0,0,0,
0,0,0,0,0,0,
0,1,1,0,0,0,
0,1,1,1,0,0,
0,1,1,1,1,0,
0,1,1,1,1,0,
0,0,0,0,0,0
]

];

level = 0;



snake = [[1,2]];

collide=(i,j)=> {
  for(k of snake){
    if(k[0]==i && k[1]==j){
       return 1;
    }
  }
  return 0;
}

draw=won=>{
  b.innerHTML='';
  for(i=0;i<8;i++){
    for(j=0;j<6;j++){
      color=maps[level][i*6+j];
      if(collide(i,j)){
        color = 2;
      }
      b.innerHTML += "<center style='width:2em;height:2em;border:1px solid;float:left;background:"+(["#000","#fff",won?"#0f0":"tan"][color])+";"+(j==0?"clear:both":"")+"'>" + ((color == 2 && i==snake[snake.length-1][0] && j==snake[snake.length-1][1]) ? " 👀" : "")
    }
  }
}
draw(0);

move=dir=>{
  var i = snake[snake.length-1][0];
  var j = snake[snake.length-1][1];
  
  if(dir == 0){
    if(!collide(i+1,j))
      snake.push([i + 1, j])
  }
  
  if(dir == 1){
    if(!collide(i,j-1))
      snake.push([i, j - 1])
  }
  
  if(dir == 2){
    if(!collide(i-1,j))
      snake.push([i - 1, j])
  }
  
  if(dir == 3){
    if(!collide(i,j+1))
      snake.push([i, j + 1])
  }
  
  if(snake.length > [8,13][level])
    snake = snake.slice(1);
  
  draw();
  
  var won = 1;
  for(k of snake){
    if(maps[level][6*k[0]+k[1]] == 0){
       won = 0;
    }
  }
  if(won){
    draw(1);
    setTimeout("level++;snake=[[1,2]];draw()",999);
  }
}

onkeyup=e=>{
  if(e.which >= 37 && e.which <= 40){
    move(e.which%4);
  }
}

</script>